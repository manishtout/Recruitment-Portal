

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}


</style>
<div class="row">
  <div class="col-md-6">
    <%= form_with url: candidates_path, html: {id: "manish"}, method: :get do|form|%>
      <%= text_field_tag :search_key, params[:search_key] %>
      <%= form.select :search, [["Pass", "Pass"], ["Fail", "Fail"],["First Round", "First"],["Second Round", "Second"],["Final Round", "Final"]], selected: params[:search] %>
    <% end %>
  </div>
 </div> 

<h3>Candidates</h3>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>email</th>
      <th>First Round</th>      
      <th>Second Round</th>  
      <th>Final Round</th>  
    </tr>
  </thead>

  <tbody>   
      <% @candidates.uniq.each do |candidate| %>
        <tr>
          <td><%= candidate.name %></td>
          <td><%= candidate.email %></td> 
          <% flag = 3 %>
          <%candidate.reports.each do |r|%>
            <td><%= r.status%></td>
            <% flag -= 1%>
          <% end %>
          <% for i in 0...flag%>
            <td> not scheduled</td>
          <% end %>
          <td><%= link_to "Show", candidate_path(candidate.id), :class => "btn btn-outline-info" %></td>
          <td><%= link_to "Edit", edit_candidate_path(candidate.id), :class => "btn btn-outline-primary" %></td>
          <td><%= link_to "Destroy", candidate_path(candidate.id), method: :delete, data: { confirm: "Are you sure?" }, :class => "btn btn-outline-danger"  %></td>
          <% if candidate.reports.where(status: "Fail").blank? %>
            <td><%= link_to "Create New Report", new_candidate_report_path(candidate.id), :class => "btn btn-outline-success" %></td>
          <% end %> 
        </tr>
      <% end %>
  </tbody>
</table>
<br>

<%= link_to "New candidate", new_candidate_path, :class => "btn btn-outline-success"  %>
<%= will_paginate @candidates %> 

